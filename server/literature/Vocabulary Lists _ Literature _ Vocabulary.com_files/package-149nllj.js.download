Module.define("vcom/achievements",["base","jquery","waitforimages","vcom/api"],function(){function p(){return modules.vcom.api.remote("/me/achievements",{data:{limit:500}}).then(function(a){var c={},d=0,b=0;a.achievements.forEach(function(a){a.last_earned_at=new Date(a.last_earned_at);a.first_earned_at=new Date(a.first_earned_at);a.milestone1&&(a.milestone1=new Date(a.milestone1));a.milestone2&&(a.milestone2=new Date(a.milestone2));a.milestone3&&(a.milestone3=new Date(a.milestone3));c[a.id]=a;"MLTR"==
r[a.id].type&&(d+=a.count);"LVL"==r[a.id].type&&null!=a.value&&(b=a.value)});return h.map(function(a){a=m.extend({count:0,milestone:-1},a,c[a.id]);var u=a.milestones.indexOf(a.count+1);a.count&&-1==a.milestone&&(a.milestone=0);a.nextBonus=-1==u?a.bonuses[0]:a.bonuses[u];a.nextMilestoneBonus=a.bonuses[a.milestone+1];a.complete=a.milestone+1==a.milestones.length;!a.complete&&(u=a.milestones[a.milestone+1])&&(a.togo="MCNT"==a.type?a.metric-d:"LVL"==a.type?u-b:u-(a.count||0));return a})})}function f(a){if(a&&
a.id){var c=r[a.id];c?(a=m.extend({},c,a),w.push(a),1==w.length&&g(a)):console.error("unknown achievement type",ac.id)}}function g(a){var c=m("header.page-header"),b=c.find(".achievements");a?m('\x3ca class\x3d"ach-bg '+a.id+'"\x3e\x3cdiv class\x3d"label"\x3e\x3cdiv class\x3d"name"\x3e\x3c/div\x3e\x3cdiv class\x3d"count text-border-color"\x3e\x3c/div\x3e\x3cdiv class\x3d"bonus"\x3e\x3c/div\x3e\x3c/div\x3e\x3c/a\x3e').attr({title:a.name,href:"/leaderboards/today/"+a.id}).find(".name").text(a.name+
"!").end().find(".count").text(d(a.count)+"x").end().find(".bonus").text("+"+(a.bonus?d(a.bonus):"")+" bonus").end().prepend(m('\x3ci class\x3d"ach '+a.id+(a.milestone?" M"+a.milestone:"")+'"\x3e\x3c/i\x3e').attr("data-progress",a.progress)).on("click",function(){VCOM.showAchievementDetail(a.id);return!1}).appendTo(b.empty()).drawProgress().waitForImages(!0).then(function(){c.addClass("with-achievements");setTimeout(function(){w.shift();g(w[0])},5500)}):c.removeClass("with-achievements")}function e(a){a.each&&
a.each(function(){var a=m(this),d=parseInt(a.data("progress"))||0;d=Math.min(1,Math.max(0,(d||0)/100||0));var n=a.data("milestone");null==n&&(n=a.hasClass("M1")?1:a.hasClass("M2")?2:a.hasClass("M3")?3:0,a.data("milestone",n));a.removeClass("M1 M2 M3");0<n&&a.addClass("M"+n);var h=c[n||0][0];n=h+(c[n||0][1]-h)*d;0<d&&(d=a.find("path"),d.length?d.attr("d",b(l(h),l(n))):(d=k("svg",{viewBox:"0 0 240 240"}),d.appendChild(k("path",{"class":"progress",d:b(l(h),l(n)),fill:"none","stroke-linecap":"round"})),
a.append(d)))})}function l(a){return a*Math.PI/180-1.5*Math.PI}function b(a,c){var d=c-a<Math.PI?" 0 1 ":" 1 1 ";return" M "+[120+90*Math.cos(a),120+90*Math.sin(a)].join(" ")+" A 90 90 0 "+d+[120+90*Math.cos(c),120+90*Math.sin(c)].join(" ")}function k(a,c,d){a=document.createElementNS("http://www.w3.org/2000/svg",a);if(c)for(var b in c)a.setAttribute(b,c[b]);null!=d&&a.appendChild(document.createTextNode(d));return a}function a(c,b,h){h||(h=Math.ceil((b-c)/20),n.addClass("animating"));var m=Math.min(c,
b);m<b?setTimeout(function(){a(c+h,b,h)},40):n.removeClass("animating");n.html(d(m))}function d(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}var h=[{name:"1 Day Streak",type:"DSTK",milestones:[1,5,25,50],level:!1,bonuses:[500,2500,12500,25E3],id:"DSTK1"},{name:"2 Day Streak",type:"DSTK",milestones:[1,5,25,50],level:!1,bonuses:[750,3750,18750,37500],id:"DSTK2"},{name:"3 Day Streak",type:"DSTK",milestones:[1,5,25,50],level:!1,bonuses:[1E3,5E3,25E3,5E4],id:"DSTK3"},{name:"4 Day Streak",
type:"DSTK",milestones:[1,5,25,50],level:!1,bonuses:[1500,7500,37500,75E3],id:"DSTK4"},{name:"5 Day Streak",type:"DSTK",milestones:[1,5,25,50],level:!1,bonuses:[2E3,1E4,5E4,1E5],id:"DSTK5"},{name:"6 Day Streak",type:"DSTK",milestones:[1,5,25,50],level:!1,bonuses:[2500,12500,62500,125E3],id:"DSTK6"},{name:"Mastered the Week",type:"DSTK",milestones:[1,5,25,50],level:!1,bonuses:[5E3,25E3,125E3,25E4],id:"DSTK7"},{name:"Leader of the Jam",type:"JAM",milestones:[1,10,100,1E3],level:!1,bonuses:[1E3,1E4,
1E5,1E6],id:"JL"},{name:"Jam Team Leader",type:"JAM",milestones:[1,50,500,5E3],level:!1,bonuses:[500,5E3,5E4,5E5],id:"JTL"},{name:"Winning Team",type:"JAM",milestones:[1,50,500,5E3],level:!1,bonuses:[500,5E3,5E4,5E5],id:"JWT"},{type:"LVL",name:"Novice",milestones:[0,1250,2500,3750],level:!0,bonuses:[0,50,100,200],id:"L01"},{type:"LVL",name:"Hotshot",milestones:[5E3,1E4,15E3,2E4],level:!0,bonuses:[250,375,500,1E3],id:"L02"},{type:"LVL",name:"Phenom",milestones:[25E3,31250,37500,43750],level:!0,bonuses:[313,
469,625,1250],id:"L03"},{type:"LVL",name:"Prodigy",milestones:[5E4,62500,75E3,87500],level:!0,bonuses:[625,938,1250,2500],id:"L04"},{type:"LVL",name:"Brainiac",milestones:[1E5,125E3,15E4,175E3],level:!0,bonuses:[1250,1875,2500,5E3],id:"L05"},{type:"LVL",name:"Savant",milestones:[2E5,225E3,25E4,275E3],level:!0,bonuses:[1250,1875,2500,5E3],id:"L06"},{type:"LVL",name:"Maven",milestones:[3E5,325E3,35E4,375E3],level:!0,bonuses:[1250,1875,2500,5E3],id:"L07"},{type:"LVL",name:"Verbivore",milestones:[4E5,
425E3,45E4,475E3],level:!0,bonuses:[1250,1875,2500,5E3],id:"L08"},{type:"LVL",name:"Logophile",milestones:[5E5,525E3,55E4,575E3],level:!0,bonuses:[1250,1875,2500,5E3],id:"L09"},{type:"LVL",name:"Sage",milestones:[6E5,625E3,65E4,675E3],level:!0,bonuses:[1250,1875,2500,5E3],id:"L10"},{type:"LVL",name:"Maestro",milestones:[7E5,725E3,75E4,775E3],level:!0,bonuses:[1250,1875,2500,5E3],id:"L11"},{type:"LVL",name:"Guru",milestones:[8E5,825E3,85E4,875E3],level:!0,bonuses:[1250,1875,2500,5E3],id:"L12"},{type:"LVL",
name:"Polymath",milestones:[9E5,925E3,95E4,975E3],level:!0,bonuses:[1250,1875,2500,5E3],id:"L13"},{type:"LVL",name:"Sesquipedalianist",milestones:[1E6,125E4,15E5,175E4],level:!0,bonuses:[12500,18750,25E3,5E4],id:"L14"},{type:"LVL",name:"Lexicomaniac",milestones:[2E6,275E4,35E5,425E4],level:!0,bonuses:[37500,56250,75E3,15E4],id:"L15"},{type:"LVL",name:"Vocabularian",milestones:[5E6,625E4,75E5,875E4],level:!0,bonuses:[62500,93750,125E3,25E4],id:"L16"},{type:"LVL",name:"Walking Dictionary",milestones:[1E7,
1375E4,175E5,2125E4],level:!0,bonuses:[187500,281250,375E3,75E4],id:"L17"},{name:"Running Dictionary",type:"LVL",milestones:[25E6,3125E4,375E5,4375E4],level:!0,bonuses:[312500,468750,625E3,125E4],id:"L18"},{name:"Mastermind",type:"LVL",milestones:[5E7,625E5,75E6,875E5],level:!0,bonuses:[625E3,937500,125E4,25E5],id:"L19"},{name:"Word Czar",type:"LVL",milestones:[1E8,2E8,3E8,4E8],level:!0,bonuses:[5E6,75E5,1E7,2E7],id:"L20"},{type:"MCNT",name:"10 Words Mastered",milestones:[1],metric:10,level:!1,bonuses:[1E3],
id:"M10"},{type:"MCNT",name:"100 Words Mastered",milestones:[1],metric:100,level:!1,bonuses:[1E4],id:"M100"},{name:"10,000 Words Mastered",type:"MCNT",milestones:[1],metric:1E4,level:!1,bonuses:[1E6],id:"M10K"},{type:"MCNT",name:"150 Words Mastered",milestones:[1],metric:150,level:!1,bonuses:[15E3],id:"M150"},{name:"1,000 Words Mastered",metric:1E3,type:"MCNT",milestones:[1],level:!1,bonuses:[1E5],id:"M1K"},{type:"MCNT",name:"200 Words Mastered",milestones:[1],metric:200,level:!1,bonuses:[2E4],id:"M200"},
{type:"MCNT",name:"250 Words Mastered",milestones:[1],metric:250,level:!1,bonuses:[25E3],id:"M250"},{name:"2,000 Words Mastered",metric:2E3,type:"MCNT",milestones:[1],level:!1,bonuses:[2E5],id:"M2K"},{type:"MCNT",name:"300 Words Mastered",milestones:[1],metric:300,level:!1,bonuses:[3E4],id:"M300"},{name:"3,000 Words Mastered",metric:3E3,type:"MCNT",milestones:[1],level:!1,bonuses:[3E5],id:"M3K"},{type:"MCNT",name:"400 Words Mastered",milestones:[1],metric:400,level:!1,bonuses:[4E4],id:"M400"},{name:"4,000 Words Mastered",
metric:4E3,type:"MCNT",milestones:[1],level:!1,bonuses:[4E5],id:"M4K"},{type:"MCNT",name:"5 Words Mastered ",milestones:[1],metric:5,level:!1,bonuses:[500],id:"M5"},{type:"MCNT",name:"50 Words Mastered",milestones:[1],metric:50,level:!1,bonuses:[5E3],id:"M50"},{type:"MCNT",name:"500 Words Mastered",milestones:[1],metric:500,level:!1,bonuses:[5E4],id:"M500"},{name:"5,000 Words Mastered",metric:5E3,type:"MCNT",milestones:[1],level:!1,bonuses:[5E5],id:"M5K"},{name:"Mastered a word starting with 'A'",
type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MA"},{name:"Mastered a word starting with 'B'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MB"},{name:"Mastered a word starting with 'C'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MC"},{name:"Mastered a word starting with 'D'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MD"},{name:"Mastered a word starting with 'E'",type:"MLTR",milestones:[1,
5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"ME"},{name:"Mastered a word starting with 'F'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MF"},{name:"Mastered a word starting with 'G'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MG"},{name:"Mastered a word starting with 'H'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MH"},{name:"Mastered a word starting with 'I'",type:"MLTR",milestones:[1,5,50,100],level:!1,
bonuses:[1E3,2E3,5E3,1E4],id:"MI"},{name:"Mastered a word starting with 'J'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MJ"},{name:"Mastered a word starting with 'K'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MK"},{name:"Mastered a word starting with 'L'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"ML"},{name:"Mastered a word starting with 'M'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,
2E3,5E3,1E4],id:"MM"},{name:"Mastered a word starting with 'N'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MN"},{name:"Mastered a word starting with 'O'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MO"},{name:"Mastered a word starting with 'P'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MP"},{name:"Mastered a word starting with 'Q'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],
id:"MQ"},{name:"Mastered a word starting with 'R'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MR"},{name:"Mastered a word starting with 'S'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MS"},{name:"Mastered a word starting with 'T'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MT"},{name:"Mastered a word starting with 'U'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MU"},{name:"Mastered a word starting with 'V'",
type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MV"},{name:"Mastered a word starting with 'W'",type:"MLTR",milestones:[1,5,50,100],level:!1,bonuses:[1E3,2E3,5E3,1E4],id:"MW"},{name:"Mastered a word starting with 'X'",type:"MLTR",milestones:[1,3,5,8],level:!1,bonuses:[1E3,1500,2E3,3E3],id:"MX"},{name:"Mastered a word starting with 'Y'",type:"MLTR",milestones:[1,5,20,35],level:!1,bonuses:[1E3,2E3,4E3,8E3],id:"MY"},{name:"Mastered a word starting with 'Z'",type:"MLTR",milestones:[1,
5,20,30],level:!1,bonuses:[1E3,2E3,4E3,7E3],id:"MZ"},{name:"Perfect Round!",type:"RND",milestones:[1,10,100,1E3],level:!1,bonuses:[100,1E3,1E4,1E5],id:"PRND"},{name:"Streak - 10 in a Row",type:"STK",milestones:[1,10,100,1E3],metric:10,level:!1,bonuses:[50,500,5E3,5E4],id:"S10"},{name:"Streak - 100 in a Row",type:"STK",milestones:[1,10,100,1E3],metric:100,level:!1,bonuses:[1E3,1E4,1E5,1E6],id:"S100"},{name:"Streak - 15 in a Row",type:"STK",milestones:[1,10,100,1E3],metric:15,level:!1,bonuses:[75,750,
7500,75E3],id:"S15"},{name:"Streak - 20 in a Row",type:"STK",milestones:[1,10,100,1E3],metric:20,level:!1,bonuses:[100,1E3,1E4,1E5],id:"S20"},{name:"Streak - 25 in a Row",type:"STK",milestones:[1,10,100,1E3],metric:25,level:!1,bonuses:[250,2500,25E3,25E4],id:"S25"},{name:"Streak - 5 in a Row",type:"STK",milestones:[1,10,100,1E3],metric:5,level:!1,bonuses:[25,250,2500,25E3],id:"S5"},{name:"Streak - 50 in a Row",type:"STK",milestones:[1,10,100,1E3],metric:50,level:!1,bonuses:[500,5E3,5E4,5E5],id:"S50"}],
r=h.reduce(function(a,c){a[c.id]=c;return a},{});this.all=h;this.byId=r;var m=jQuery,q=0,x,n=m(),c=[[5,355],[10,350],[30,330],[40,320]],w=[];this.showAchievement=VCOM.showAchievement=f;this.nextGoal=function(){function a(a){var c=null;a=b(a);for(var n=5;null==c&&50>n;n+=5)c=a.filter(function(a){return a.togo<("LVL"==a.type?1E3*n:n)})[0];null==c&&(c=a[0]);if(null!=c)if("LVL"==c.type)if(-1==c.milestone){a=c;var h="Score "+c.togo.toLocaleString()+" more points and become ";a:switch((c.name||"").charAt(0).toLowerCase()){case "a":case "e":case "i":case "o":case "u":var m=
"an";break a;default:m="a"}a.text=h+m+" "+c.name+"."}else c.text="Score "+c.togo.toLocaleString()+" more points and earn your "+d(c.milestone+1)+" "+c.name+" milestone.";else"STK"==c.type?c.text=-1==c.milestone?"Answer "+c.metric+" in a row correct.":"Answer "+c.metric+" in a row correct "+c.togo+" time"+(1==c.togo?"":"s")+" and earn your "+d(c.milestone+1)+" milestone.":"PRND"==c.id?c.text=-1==c.milestone?"Complete your first perfect round.":"Complete "+c.togo+" perfect round"+(1==c.togo?"":"s")+
" and earn your "+d(c.milestone+1)+" milestone.":"MLTR"==c.type?(a=c.id.charAt(1),c.text=-1==c.milestone?'Master a word starting with "'+a+'"':"Master "+c.togo+' more \x3ca href\x3d"/words/'+a.toLowerCase()+'"\x3eword'+(1==c.togo?"":"s")+' starting with "'+a+'"\x3c/a\x3e and earn your '+d(c.milestone+1)+" milestone."):"MCNT"==c.type&&(c.text="Master "+c.togo+" more word"+(1==c.togo?"":"s")+".");return c}function c(){for(var a="DSTK1",c=6;1<=c;c--){var b=m["DSTK"+c];if(b&&n(b.last_earned_at,e)){a=
"DSTK"+(c+1);break}}c=m[a];a=parseInt(a.substring(a.length-1));1==a?c.text="Master your first word today and earn your "+d(c.count+1)+" one-day streak.":7>a?c.text="Master a word and extend your mastery streak to "+a+" days.":7==a&&(c.text="Master your first word today and complete a week mastery streak.");return c}function d(a){var c=["th","st","nd","rd"],d=a%100;return a+(c[(d-20)%10]||c[d]||c[0])}function b(a){var c=!1,d=!1;return a.filter(function(a){if(a.complete)return!1;var b=a.milestone;a.nextMilestoneBonus&&
(a.weight="LVL"==a.type?a.nextBonus/(a.togo/100*(a.bonuses[0]|1)):a.nextBonus/(a.togo*(a.bonuses[0]|1)*(a.metric||1)));switch(a.type){case "DSTK":case "JAM":return!1;case "LVL":return 3>b&&!c?c=!0:!1;case "MLTR":if(-1<b&&3>b)return"MX"==a.id||"MY"==a.id&&0<b||"MZ"==a.id&&0<b||"MQ"==a.id&&1<b||"MK"==a.id&&1<b?!1:!0;case "MCNT":return a.count||d?!1:d=!0;case "STK":return!a.count&&20<a.metric?!1:!0;default:return!0}}).sort(function(a,c){return(c.weight||0)-(a.weight||0)})}function n(a,c){return a&&c&&
a.getYear()==c.getYear()&&a.getMonth()==c.getMonth()&&a.getDate()==c.getDate()}var h,m={},e=new Date,k=new Date;e.setDate(e.getDate()-1);return p().then(function(d){h=d.filter(function(a){return"MLTR"==a.type}).reduce(function(a,c){return null==a||c.last_earned_at>a?c.last_earned_at:a},null);m=d.reduce(function(a,c){return a[c.id]=c,a},{});var b=null;h&&!n(k,h)&&(b=c());null==b&&(b=a(d));return b})};this.fetchAllAnnotated=p;m(function(){n=m(".logininfo .points");m("body").on("challenge.update pdata.update",
function(c){c.pdata&&c.pdata.points&&c.pdata.points!=q&&(c=c.pdata,VCOM.authCache.update({$set:{points:c.points,level:c.level}}),a(q||c.points,q=c.points),$levelbadge=m(".logininfo .ach").data(c.level),x!=c.level.id&&(x=c.level.id,$levelbadge.attr({"class":"icon ach levelbadge "+x})),e($levelbadge))})});this.drawProgress=e});
Module.define("vcom/api",["vcom/base","cookie","jquery"],function(){function p(b,c){var n=a.Deferred();e().then(function(m){c=a.extend({method:"GET",cache:"no-store",retries:2,retryDelay:250},c);c.headers=a.extend({Accept:"application/json","X-Time-Zone":modules.cookie.get("tz")},c.headers,{Authorization:"Bearer "+m.access_token});"html"==c.type?c.headers.Accept="text/html":"text"==c.type&&(c.headers.Accept="text/plain");"object"==typeof c.data&&(m=c.data,delete c.data,"PUT"==c.method||"PATCH"==c.method||
"json"==c.type?(c.body=JSON.stringify(m),c.headers["Content-Type"]="application/json"):"POST"==c.method?(c.body=g(m),c.headers["Content-Type"]="application/x-www-form-urlencoded; charset\x3dUTF-8"):b=b+(-1==b.indexOf("?")?"?":"\x26")+g(m));x(h.apiServer+h.apiVersion+b,c).then(function(a){h.link=f(a.headers.link||a.headers.Link);n.resolve("raw"==c.type?a:"html"==c.type||"text"==c.type?a.text:a.json)}).fail(function(a){401==a.status&&k();0<c.retries&&d[c.error]?(c.retries--,c.retryDelay*=2,k(),setTimeout(function(){p(b,
c).then(n.resolve).fail(n.reject)},c.retryDelay||1E3)):n.reject(a)})});return n}function f(a){if(!a||!a.length)return{};var c={};a.split(/,\s+/).forEach(function(a){var b=a.split(/;\s+/);a={uri:b[0].replace(/<(.*)>/,"$1").trim()};for(var d=1;d<b.length;d++){var n=/([^=]*)="([^"]*)"/.exec(b[d].trim());n&&(a[n[1]]=n[2])}b=h.apiServer+h.apiVersion;a.uri.startsWith(b)&&(a.uri=a.uri.substring(b.length));c[a.rel]=a});return c}function g(a){if("object"===typeof a){var c=[],b;for(b in a){var d=a[b];null!=
d&&("object"===typeof d&&"function"===typeof d.map?c.push(d.map(function(a){return encodeURIComponent(b)+"\x3d"+encodeURIComponent(a)}).join("\x26")):null!=d&&c.push(encodeURIComponent(b)+"\x3d"+encodeURIComponent(d)))}return c.join("\x26")}return a}function e(d){var c=Date.now();if(m&&!d){if(m.expiresAt&&m.expiresAt>c)return m;m=null}var n=a.Deferred();n.expiresAt=c+1E4;m=n;b();VCOM.auth(function(a){c=Date.now();var b=JSON.parse(sessionStorage.getItem("api.token")||"null"),e=null==b||!b.expires_at||
c>b.expires_at;d||null==b||e||b.refresh_token!=a.guid?x(h.apiServer+h.apiVersion+"/auth/token",{method:"POST",body:g(null!=a.guid?{refresh_token:a.guid}:e?null:{refresh_token:b.refresh_token}),headers:{"Content-Type":"application/x-www-form-urlencoded; charset\x3dUTF-8"}}).then(function(a){200==a.status?(a=a.json,a.expires_at=c+1E3*a.expires_in,delete a.expires_in,l(a.expires_at),sessionStorage.setItem("api.token",JSON.stringify(a)),n.expiresAt=a.expires_at,n.resolve(a)):(m=null,n.reject(a))}).fail(function(a){m=
null;n.reject(a)}):(n.expiresAt=b.expires_at,n.resolve(b),l(b.expires_at))});return n}function l(a){b();a=Math.max(1,a-Date.now()-5E3);r=setTimeout(function(){return e(!0)},a)}function b(){r&&(clearTimeout(r),r=null)}function k(){m=null;sessionStorage.removeItem("api.token");b()}var a=jQuery,d={401:!0,403:!0},h=this,r=null,m=null;this.apiVersion="/1.0";this.apiServer=window.VCOM.__api_server||"https://api.vocabulary.com";this.remote=p;this.getAuth=e;var q={requests:0,responses:0,errors:0,totaltime:0,
max:null};this.resetStats=function(){return q={requests:0,responses:0,errors:0,timeouts:0,totaltime:0,max:null}};this.stats=function(){return a.extend({},q)};this.authStatus=function(){var a=null,c=null;try{a=JSON.parse(sessionStorage.getItem("api.token")||"{}")}catch(u){}try{if(a&&a.access_token){var b=a.access_token.split(".")[1].replace("-","+").replace("_","/");c=JSON.parse(window.atob(b))}}catch(u){}return{now:new Date+"",issued_at:c&&c.iat?new Date(1E3*c.iat)+"":null,expires_at:c&&c.exp?new Date(1E3*
c.exp)+"":null,jwt:c,cached:null!=m,cache_ttl:null==m?null:m.expiresAt-Date.now()}};a(window).on("authchange",k);var x=function(){var b={},c=0,d=a.Deferred(),m=h.apiServer+"/proxy.html";a(function(){a('\x3ciframe name\x3d"_vcom_proxy"\x3e').attr("src",m).hide().appendTo("body")});a(window).on("pageshow",function(c){try{var b=a('iframe[name\x3d"_vcom_proxy"]');b[0].contentWindow.location.href!=m&&b.attr("src",m)}catch(D){}});addEventListener("message",function(a){if(a.origin.match(h.apiServer.replace(/\./g,
"\\.")))if(a.data&&b[a.data.id]){var c=b[a.data.id];if(c){var m=Date.now()-c.start;q.totaltime+=m;if(!q.max||m>q.max.time)q.max={url:c.url,time:m};delete b[a.data.id];clearTimeout(c.timeout);"done"==a.data.status&&a.data.response?200<=a.data.response.status&&300>a.data.response.status?(q.responses++,c.promise.resolve(a.data.response)):(q.errors++,c.promise.reject(a.data.response||a.data.error)):(q.errors++,c.promise.reject(a.data.error))}}else a.data&&a.data.ready&&d.resolve(a.source)},!1);return function(h,
n){var e=c++,k=b[e]={promise:a.Deferred(),url:h,start:Date.now()};d.then(function(a){q.requests++;a.postMessage({id:e,url:h,options:n},m)});k.timeout=setTimeout(function(){var a=b[e];a&&(q.timeouts++,delete b[e],a.promise.reject(Error("timeout waiting for proxied API request to: "+h)))},1E4);return k.promise}}();this.progress={getWord:function(a,c){return p("/progress/words/"+a,{data:c,method:"GET"})},getWords:function(a){return p("/progress/words",{data:a,method:"GET"})},getListWords:function(a,
c){return p("/progress/words/list/"+a,{data:c,method:"GET"})},setPriority:function(a,c){return p("/progress/words/"+a,{data:{priority:c},method:"PATCH"})},priority:{NORMAL:0,HIGH:1,LOW:-1}}});
Module.define("vcom/examplebrowser",["jquery","date","vcom/examplebrowser.css"],function(){function p(b,k){function a(a){B.query&&(B.domain=k.domain,v=!0,c(B,function(c){v=!1;t.totalResults=c.totalHits;t.sentences.push.apply(t.sentences,c.sentences);d(!0);"function"===typeof a&&a.call(w,B)}))}function d(a){0==t.sentences.length?h(f('\x3cdiv class\x3d"results"\x3e\x3cdiv class\x3d"messages"\x3eno examples found\x3c/div\x3e\x3c/div\x3e'),a):h(f('\x3cdiv class\x3d"results"\x3e\x3c/div\x3e').append(x(t)),
a);u.toggleClass("hasPrev",t.hasPrev());u.toggleClass("hasNext",t.hasNext());u.trigger("exampleBrowser.load",B.query)}function h(a,c){var b=y.width()+10;y.height(y.height());u.addClass("animating");a.css("left",(c?b:-b)+"px").appendTo(y).animate({left:0},500);y.animate({height:a.height()},500);var d=A;A.animate({left:c?-b:b},500,function(){d.remove();y.css("height","auto");u.removeClass("animating")});A=a}function r(){t.hasNext()&&(t.displayPtr+t.displayWindow>=t.sentences.length?v||(v=!0,B.startOffset=
t.sentences.length,c(B,function(a){v=!1;t.sentences.push.apply(t.sentences,a.sentences);t.displayPtr<t.sentences.length+t.displayWindow&&(t.displayPtr+=t.displayWindow,d(!0))})):t.displayPtr<t.sentences.length+t.displayWindow&&(t.displayPtr+=t.displayWindow,d(!0)))}function m(){t.hasPrev()&&(t.displayPtr-=t.displayWindow,d(!1))}function q(a){var c=f('\x3cdiv class\x3d"sentence"/\x3e'),b=a.sentence;a=a.offsets;for(var d=0,h=0;h<a.length;h+=2)c.append(document.createTextNode(b.substring(d,a[h]))),c.append(f("\x3cstrong/\x3e").text(b.substring(a[h],
a[h+1]))),d=a[h+1];c.append(document.createTextNode(b.substring(d)));return f("\x3cli/\x3e").append(c)}function x(a){for(var c=f("\x3cul/\x3e"),b=a.displayPtr;b<Math.min(a.sentences.length,a.displayPtr+a.displayWindow);b++){var d=a.sentences[b];q(d).append(n(d)).appendTo(c)}return c}function n(a){var c=f('\x3ca target\x3d"_blank" rel\x3d"noopener" class\x3d"source"\x3e\x3c/a\x3e'),b=f("\x3cspan /\x3e").appendTo(c);"GUT"==a.volume.corpus.id?(c.attr("href","https://www.gutenberg.org/ebooks/"+a.volume.locator),
b.addClass("author").text(a.volume.author)):(l[a.volume.corpus.id]?b.addClass("title").text(a.volume.title):(b.addClass("corpus").text(a.volume.corpus.name),a.volume.datePublished&&f('\x3cspan class\x3d"date" /\x3e').text(Date.fromISO(a.volume.datePublished).format("mediumDate")).appendTo(c)),a.volume.asin?c.attr("href","https://www.amazon.com/dp/"+a.volume.asin+"?tag\x3dvocabulary01-20"):a.volume.locator&&0==a.volume.locator.indexOf("http")&&c.attr("href",a.volume.locator));return c}function c(a,
c){f.get(a.domain?"https://corpus.vocabulary.com/api/1.0/examples.json":"https://corpus.vocabulary.com/api/1.0/examples/random.json",f.extend({maxResults:a.domain?6*k.displayWindow:16*k.displayWindow},a),function(a){c(a.result)})}var w=this;this.clear=function(){y.empty();t.reset();b.trigger("exampleBrowser.clear")};this.next=r;this.prev=m;k=k||{};k.displayWindow||(k.displayWindow=3);b&&(b=f(b).empty().addClass("vcom_examples").data("examplebrowser",this),b.attr("count")&&(k.displayWindow=parseInt(b.attr("count"))),
"false"==b.attr("domains")&&(k.hideDomains=!0));this.options=k;var u=f('\x3cdiv class\x3d"exampleBrowser"\x3e\x3c/div\x3e');this.element=u[0];var p=f('\x3cdiv class\x3d"example-dropdown-header"\x3e\x3c/div\x3e').appendTo(u);f('\x3cspan class\x3d"header-text"\x3eUsage Examples\x3c/span\x3e').appendTo(p);var C=f('\x3cdiv class\x3d"dropdown-wrapper"\x3e\x3c/div\x3e').appendTo(p),D=f('\x3cdiv class\x3d"dropdown-component"\x3e\x3c/div\x3e').appendTo(C);f('\x3cdiv class\x3d"dropdown-select"\x3e\x3c/div\x3e').appendTo(D).text(e[0]);
var E=f("\x3cul\x3e\x3c/ul\x3e").appendTo(D);e.forEach(function(c,b){c=f("\x3cli\x3e\x3c/li\x3e").text(c).attr("data-code",g[b]).appendTo(E);0===b&&c.addClass("selected");c.on("click",function(){var c=f(this).data("code");c?k.domain=c:delete k.domain;B&&(B.startOffset=0,t.reset(),a())})});C.on("click",function(a){a.stopPropagation();f(this).toggleClass("dropdown-open");a=C.offset().top-f(document).scrollTop();var c=C.height();a+c+E.height()>f(window).height()?E.css("bottom","32px"):E.css("bottom",
"unset")});f(document).click(function(){C.removeClass("dropdown-open")});f(E).on("click","li",function(){var a=f(this).html();f(this).addClass("selected");f("li").not(f(this)).removeClass("selected");f(".dropdown-select").html(a)});var y=f('\x3cdiv class\x3d"container"\x3e\x3c/div\x3e').appendTo(u),A=f('\x3cdiv class\x3d"results"\x3e\x3cdiv class\x3d"messages"\x3eloading examples...\x3c/div\x3e\x3c/div\x3e').appendTo(y);f('\x3cdiv class\x3d"buttons"\x3e\x3ca class\x3d"prev" title\x3d"prev"\x3e\x26lt prev\x3c/a\x3e | \x3ca class\x3d"next right" title\x3d"next"\x3enext \x26gt\x3c/a\x3e\x3c/div\x3e').appendTo(p);
p.on("click","a.next, a.prev",function(a){a.preventDefault();u.hasClass("animating")||(f(this).hasClass("next")?r():m())});b&&f(b).empty().append(u);var B=null,G=null;this.search=function(c,b){c!=G&&(G=c.trim(),B={query:c,startOffset:0},t.reset(),a(b));return!1};var t={displayPtr:0,displayWindow:k.displayWindow,sentences:[],totalResults:0,renderHTML:q,hasNext:function(){return this.displayPtr+this.displayWindow<this.totalResults},hasPrev:function(){return 0<this.displayPtr},reset:function(){this.displayPtr=
0;this.sentences=[];this.totalResults=0}},v=!1;b&&b.attr("word")&&this.search(b.attr("word"))}var f=jQuery,g=[null,"F","A","N","B","S","M","T"],e="All sources;Fiction;Arts / culture;News;Business;Sports;Science / Med;Technology".split(";"),l={LIT:1,TXB:1};this.construct=function(){$this=f(this);return $this.data("examplebrowser")||new p(this)};this.ExampleBrowser=p});
Module.define("vcom/handleCollapse",["jquery"],function(){var p=jQuery;return function(){function f(h){h.preventDefault();(d="yes"===localStorage.getItem(k))?(g.removeClass(a),localStorage.setItem(k,"no"),b()):(g.addClass(a),localStorage.setItem(k,"yes"),l())}var g,e,l,b,k,a,d=!0;return{initHandleCollapse:function(h){h=void 0===h?{}:h;var r=void 0===h.cbUncollapse?function(){}:h.cbUncollapse,m=void 0===h.jContainer?null:h.jContainer,q=void 0===h.containerSelector?"":h.containerSelector,x=void 0===
h.collapseClassname?"collapse":h.collapseClassname,n=void 0===h.jListener?null:h.jListener,c=void 0===h.listenerSelector?"":h.listenerSelector,w=void 0===h.storageName?q+c:h.storageName;l=void 0===h.cbCollapse?function(){}:h.cbCollapse;b=r;g=m||p(q);e=n||p(c);a=x;k=w;1>g.length&&1>e.length?console.error("function handleCollpase","Unable to initialize"):(e.on("click",f),(d="yes"===localStorage.getItem(k))?(g.addClass(a),l()):(g.removeClass(a),b()))}}}});
Module.define("vcom/history",["jquery","date"],function(){function p(a){var b={},d=a.indexOf("?");-1<d&&(a=a.substring(d+1));a.split("\x26").forEach(function(a){a=a.split("\x3d");2==a.length&&(b[a[0]]=unescape(a[1].replace(/\+/g," ")))});return b}function f(a){var b=[],d;for(d in a)null!=a[d]&&b.push(d+"\x3d"+encodeURIComponent(a[d]));return b.join("\x26")}function g(a,b){var d=null,h;for(h in l)a[h]!==b[h]&&(d||(d={}),d[h]=!0);return d}if(window.addEventListener){window.historyManager=this;var e=
jQuery,l={},b={},k={},a=0;this.init=function(a){l=e.extend({},a);if(document.location.search){a=p(document.location.search);b=e.extend({},l);for(var d in l)void 0!==a[d]&&(b[d]=a[d])}else b=e.extend({},a);setTimeout(function(){e("body").trigger({type:"stateChange",initial:!0,state:b,changed:g(l,b)||{}})},5)};this.serialize=f;this.parse=p;this.state=function(d,h){if(0===arguments.length)return e.extend({},b,k);var r=g(b,k=e.extend({},b,k,d));if(r){a++;try{e("body").trigger({type:"stateChange",state:e.extend({},
b,k),changed:r,replace:!!h})}finally{0===--a&&(g(b,k),b=e.extend({},b,k),k={},history.pushState&&(h?history.replaceState(b,"","?"+f(b)):history.pushState(b,"","?"+f(b))))}}};window.addEventListener("popstate",function(a){a=a.state||l;var d=g(b,a);d&&(b=a,e("body").trigger({type:"stateChange",state:b,changed:d}))})}});
Module.define("vcom/listtools",["vcom/base","jquery","dotimeout","vcom/api"],function(){var p=modules.vcom.api,f=jQuery;this.masteryWidget=function(){var g=f(this),e=g.data();e.parsed||(e.listId=parseInt(e.listId),e.parsed=!0,e.listId?VCOM.auth(function(l){l.validUser?p.remote("/progress/lists/"+e.listId).then(function(b){f("a[data-action\x3dbookmark]").trigger("bookmarkchange",b);if(b&&b.learnable_word_count){var k=function(){a.empty();b.learning&&a.append('\x3cbutton class\x3d"outline" data-action\x3d"stop-learning" title\x3d"Remove from learning program"\x3eStop Learning\x3c/button\x3e');
0==b.progress?a.append('\x3cbutton class\x3d"outline" data-action\x3d"finish-mastery" title\x3d"Add to learning program and start mastering the words on this list."\x3eStart Mastery\x3c/button\x3e'):1>b.progress&&a.append('\x3cbutton class\x3d"outline" data-action\x3d"finish-mastery" title\x3d"Add to learning program and finish mastering the words on this list."\x3eFinish Mastery\x3c/button\x3e')};g.append("\x3ch3\x3eList Mastery\x3c/h3\x3e");g.append('\x3cdiv class\x3d"row"\x3e\x3cdiv class\x3d"label"\x3eYour progress towards mastering all the words in this list.\x3c/div\x3e\x3cdiv class\x3d"actions"\x3e\x3c/div\x3e\x3ccanvas data-action\x3d"finish-mastery" class\x3d"progress"\x3e\x3c/div\x3e');
g.find("canvas").attr("data-progress",Math.floor(100*b.progress));var a=g.find(".actions");k();VCOM.parse(g);g.on("click",'*[data-action\x3d"stop-learning"]',function(){var a=f(this).prop("disabled",!0);f.post("/lists/"+e.listId+"/stop.json",function(){b.learning=!1;k();a.prop("disabled",!1)});return!1});g.on("click",'*[data-action\x3d"finish-mastery"]',function(){document.location.href="/play/"+e.listId;return!1})}}):g.hide()}):g.hide())};jQuery(function(g){function e(){var a=g(".page_wordlist ol.wordlist li.entry.learnable");
if(a.length){var b=function(a){p.remote("/progress/words",{data:{words:a,limit:a.length}}).then(function(a){a&&a.forEach&&a.forEach(function(a){var b=Math.floor(100*a.progress.progress);h[a.word].attr("prog",b).find("i.progress").remove().end().append(g('\x3ci class\x3d"progress"/\x3e').attr({"data-prg":b,title:b+"% Mastered"}))})})},h={};a.map(function(a){a=g(this);h[a.attr("word")]=a});a=Object.keys(h);if(50>=a.length)b(a);else for(var e=0;e<a.length;e+=50)b(a.slice(e,e+50));g(".page_wordlist select#wlOrder").find('option[value\x3d"progress"]').remove().end().append('\x3coption value\x3d"progress"\x3ein progress order\x3c/option\x3e')}else a.find("i.progress").remove(),
g('.page_wordlist select#wlOrder option[value\x3d"progress"]').remove()}function f(a,b,h){function d(c){g.contains(a[0],c.target)||c.target===a[0]||e()}function e(){a.off("hide",e);g("body").off("click",d);a.fadeOut(function(){a.trigger("hidden").remove()})}var k=b.offset();a.css("position","absolute").appendTo("body");var f=a.outerHeight(),n=a.outerWidth();a.hide();var c=b[0].getBoundingClientRect().top+f+30>g(window).height();h=g.extend({alignX:0,alignY:c?0:1,anchorX:0,anchorY:c?1:0,offsetX:0,offsetY:c?
-4:4},h);a.on("hide",e);k.top+=b.height()*h.alignY+-f*h.anchorY+h.offsetY;k.left+=b.width()*h.alignX+-n*h.anchorX+h.offsetX;a.offset(k);g("body").doTimeout("popupclick",1,"on","click",d)}var b=g('meta[name\x3d"vocab:wordlist:id"]').attr("content");VCOM.auth(function(a){a.validUser?(VCOM.recentLists(b),e()):g('.page_wordlist select#wlOrder option[value\x3d"progress"]').remove()});g("body").on("click",'*[data-action\x3d"restart-practice"]',function(a){confirm("Are you sure you would like to restart your Practice session?")&&
(document.location.href="/lists/"+b+"/reset");a.preventDefault();a.stopPropagation();return!1}).on("click",'*[data-action\x3d"restart-bee"]',function(a){confirm("Are you sure you would like to restart your Spelling Bee session?")&&(document.location.href="/lists/"+b+"/bee/reset");a.preventDefault();a.stopPropagation();return!1});var k=g("a[data-action\x3dbookmark]").on("click",function(){var a=g(this);a.hasClass("bookmarked")?(window.ga&&ga("send","event","tools","removefavorite"),g.post("/lists/deletefavorite.json",
{wordlistid:b},function(){a.trigger("bookmarkchange",{starred:!1})})):(window.ga&&ga("send","event","tools","addfavorite"),g.post("/lists/addfavorite.json",{wordlistid:b},function(){a.trigger("bookmarkchange",{starred:!0})}))}).on("bookmarkchange",function(a,b){g(this).toggleClass("bookmarked",!!b.starred);k.data("bookmarkedsrc")&&k.attr("src",b.starred?k.data("bookmarkedsrc"):k.data("unbookmarkedsrc"))}).find("img.icon").each(function(){var a=g(this);a.data("unbookmarkedsrc",a.attr("src"))});g("a[data-action\x3dprint]").on("click",
function(){if(g(".page_wordlist #wordlist").length)window.print();else g('\x3ciframe src\x3d"/lists/'+b+'" style\x3d"display:none" /\x3e').appendTo("body").on("load",function(){var a=g(this);setTimeout(function(){a[0].contentWindow.print()},10);setTimeout(function(){a.remove()},500)})});g("a[data-action\x3dcopy]").on("click",function(){function a(a){d.trigger("hide");VCOM.auth(function(d){g.post("/lists/load.json",{id:b},function(b){var h=b.result.words.map(function(a){var c={word:a.word};a.synsetid&&
(c.synsetid=a.synsetid);a.example&&(c.example=a.example);a.description&&(c.description=a.description);return c});if(d.validUser){var e=g('\x3cform method\x3d"post" /\x3e');g('\x3cinput type\x3d"hidden" name\x3d"wordlist.name" /\x3e').val(b.result.name).appendTo(e);g('\x3cinput type\x3d"hidden" name\x3d"wordlist.description" /\x3e').val(b.result.description).appendTo(e);g('\x3cinput type\x3d"hidden" name\x3d"wordlist.sourceid" /\x3e').val(b.result.wordlistid||"").appendTo(e);g('\x3cinput type\x3d"hidden" name\x3d"addwords" /\x3e').val(JSON.stringify(h)).appendTo(e);
e.attr("action",null==a?"/lists/new":"/lists/"+a.wordlistid+"/edit");e.appendTo(document.body).submit()}else sessionStorage.setItem("listmakerdata",JSON.stringify({action:"edit",shared:!0,words:h,name:b.result.name,sourceid:b.result.wordlistid,description:b.result.description})),document.location.href="/lists/new"})})}$button=g(this);if(!$button.hasClass("showing")){$button.addClass("showing");window.ga&&ga("send","event","tools","copylist");var d=g('\x3cdiv class\x3d"vcom_popup copylist"/\x3e').on("click",
".option",function(){a(g(this).data("wl"))}).on("hidden",function(){$button.removeClass("showing")}).hide();g('\x3ca class\x3d"option" role\x3d"button"\x3eNew List...\x3c/a\x3e').attr("title","Copy to a new vocabulary list").appendTo(d);f(d,$button);VCOM.auth(function(a){a.validUser?g.post("/lists/byprofile.json",{display:"created",orderby:"activitydate",pageSize:11},function(a){if(a.result){var e=0;a.result.wordlists.forEach(function(a){10>++e&&a.wordlistid!=b&&g('\x3ca role\x3d"button" class\x3d"option" /\x3e').text(a.name+
" ("+a.wordcount+")").attr("title",'Add these words to "'+a.name+'"').data("wl",a).appendTo(d)});d.appendTo(document.body).fadeIn()}}):d.appendTo(document.body).fadeIn()});return!1}}).css("user-select","none")})});
Module.define("vcom/lti",["vcom/base","vcom/units/viewer","params","jquery"],function(){function p(){var a=l('\x3cfooter class\x3d"lti"\x3e\x3cnav class\x3d"limited-width"\x3e\n\t\x3ca href\x3d"/" target\x3d"_blank" title\x3d"Vocabulary.com" class\x3d"logo"\x3e\x3cimg src\x3d"/images/header/logo.png" alt\x3d"Vocabulary.com" class\x3d"screen-only"\x3e\x3c/a\x3e\n\t\x3ca href\x3d"/terms/" target\x3d"_blank" \x3eTerms of Use\x3c/a\x3e\n\t\x3ca href\x3d"/privacy/" target\x3d"_blank" \x3ePrivacy Policy\x3c/a\x3e\t\t\n\t\t\t\t\x3c/nav\x3e\t\t\t\t\t\n\t\t   \x3c/footer\x3e');if("link"==
k)a.append(g());else if("assign"==k){var b=parseInt(l('meta[name\x3d"vocab:wordlist:id"]').attr("content"))||void 0;if(b)l(".page_wordlist .summary-activities .teach").on("click","a.activity",function(a){var d=l(this).data("type"),h=l('meta[name\x3d"title"]').attr("content")||document.title;if(h.endsWith(": Vocabulary.com")||h.endsWith("| Vocabulary.com"))h=h.substring(0,h.length-16).trim();h=l(this).find("label").text()+": "+h+" on Vocabulary.com";if("q"==d)a.preventDefault(),document.location.href=
"/quiz/new?listid\x3d"+b+"\x26callback\x3dpostLtiQuiz";else if("p"==d||"s"==d)a.preventDefault(),e({type:d,wordlist_id:b},h)});else{var h=l('meta[name\x3d"vocab:unit:id"]').attr("content");h=l(".units \x3e .unit, .unit-list \x3e li").length+(h?1:0);var f=l(".list-list \x3e li,.page-unit .items *[data-list-id]").length;l(".page-unit .items *[data-list-id]").each(function(){var a=l(this);l('\x3cdiv class\x3d"lti-actions"\x3e\x3ca class\x3d"button outline"\x3eAssign\x3c/a\x3e\x3c/div\x3e').find("a").attr("href",
"/lists/"+a.data("listId")).end().insertAfter(a.find(".actions"))});f+=l(".page-unit .wordlists *[data-list-id]").length;l(".page-unit .wordlists *[data-list-id]").each(function(){var a=l(this),b=l('\x3cdiv class\x3d"lti-actions"\x3e\x3ca class\x3d"button outline"\x3eAssign\x3c/a\x3e\x3c/div\x3e').find("a").attr("href","/lists/"+a.data("listId")).end();a.find(".actions").length?b.insertAfter(a.find(".actions")):b.prependTo(a.find(".activities"))});(0<h||0<f)&&a.append('\x3cform\x3e\x3cdiv class\x3d"limited-width"\x3e\x3ch3\x3eSelect a collection or list to assign...\x3c/h3\x3e\x3c/div\x3e\x3c/form\x3e')}}l("footer.page-footer").replaceWith(a)}
function f(){var a=document.location.protocol+"//"+document.location.host;document.location.port&&(a+=":"+document.location.port);return a+"/login/lti"}function g(){var a=l('meta[name\x3d"title"]').attr("content")||document.title,d=l('meta[name\x3d"vocab:share:noun"]').attr("content"),h=f()+"?success\x3d",e=encodeURIComponent;var k=(k=l('link[rel\x3d"canonical"]').attr("href"))?k.replace(/^.*\/\/[^\/]+/,""):document.location.pathname;h+=e(k);if(a.endsWith(": Vocabulary.com")||a.endsWith("| Vocabulary.com"))a=
a.substring(0,a.length-16).trim();"/lists/"==document.location.pathname&&(a="Featured Lists on Vocabulary.com");d&&(a=a+" : "+d+" on Vocabulary.com");e=d=a;k=l(".page_wordlist .titleblock img.cover, .page-unit .titleblock img.cover");k=k.length?{"@id":k.attr("src"),width:Math.round(k.width()),height:Math.round(k.height())}:void 0;d={"@context":"http://purl.imsglobal.org/ctx/lti/v1/ContentItem","@graph":[{"@type":"LtiLinkItem",url:h,title:d,text:e,mediaType:"application/vnd.ims.lti.v1.ltilink",placementAdvice:{presentationDocumentTarget:"frame"},
thumbnail:k}]};return l('\x3cform method\x3d"post"\x3e\n\t\t\t\t\t\x3cdiv class\x3d"limited-width"\x3e\n\t\t\t\t\t\x3cbutton type\x3d"submit" class\x3d"green"\x3eCreate Link\x3c/button\x3e\n\t\t\t\t\t\x3cdiv class\x3d"title"\x3e\x3c/div\x3e\n\t\t\t\t\t\x3c/div\x3e\n\t\t\t\t\t\x3cinput type\x3d"hidden" name\x3d"lti_message_type" value\x3d"ContentItemSelection"/\x3e\n\t\t\t\t\t\x3cinput type\x3d"hidden" name\x3d"lti_version" value\x3d"LTI-1p0"/\x3e\n\t\t\t\t\t\x3cinput type\x3d"hidden" name\x3d"content_items" value\x3d""/\x3e\n\t\t\t\t\x3c/form\x3e').attr("action",
b.content_item_return_url).find(".title").text(a).end().find('input[name\x3d"content_items"]').val(JSON.stringify(d)).end().find("form").attr("action",b.content_item_return_url).end()}function e(a,d){a={"@context":"http://purl.imsglobal.org/ctx/lti/v1/ContentItem","@graph":[{"@type":"LtiLinkItem",url:f()+"?activity_data\x3d"+btoa(JSON.stringify(a)).replace("+","-").replace("/","_").replace("\x3d",""),title:d,text:d,mediaType:"application/vnd.ims.lti.v1.ltilink",placementAdvice:{presentationDocumentTarget:"frame"}}]};
l('\x3cform method\x3d"post"\x3e\n\t\t\t\t\t\x3cinput type\x3d"hidden" name\x3d"lti_message_type" value\x3d"ContentItemSelection"/\x3e\n\t\t\t\t\t\x3cinput type\x3d"hidden" name\x3d"lti_version" value\x3d"LTI-1p0"/\x3e\n\t\t\t\t\t\x3cinput type\x3d"hidden" name\x3d"content_items" value\x3d""/\x3e\n\t\t\t\t\x3c/form\x3e').attr("action",b.content_item_return_url).find('input[name\x3d"content_items"]').val(JSON.stringify(a)).end().appendTo("body").submit()}var l=jQuery,b=this.ltiParams=function(){var a=
new URLSearchParams(document.location.search);if(a.has("lti")){var b={};a.forEach(function(a,d){return b[d]=a});sessionStorage.setItem("lti.params",JSON.stringify(b));return b}return JSON.parse(sessionStorage.getItem("lti.params")||"{}")}(),k=this.ltiMode=l("html").data("lti-mode");this.getLaunchUrl=f;k&&(VCOM.displayWord=function(a,b){window.open("/dictionary"+("en"!=b&&b?b+"/":"/")+escape(a),"_blank")},l("body").on("click","a",function(a){"play"==k||"outcome"==k?this.href.startsWith("javascript:")||
(this.target="_blank"):this.pathname.startsWith("/account/lists")||this.pathname.startsWith("/lists")||this.href.startsWith("javascript:")||(this.target="_blank")}),"play"!=k&&p());window.postLtiQuiz=function(a,b){e({type:"q",quiz_id:a.quizid},"Quiz: "+b.name+" on Vocabulary.com")}});
Module.define("vcom/npswidget",["jquery","vcom/api"],function(){function p(a,d){null==b&&(b=e('\x3cdiv class\x3d"npssurvey hidden"\x3e\x3cdiv class\x3d"limited-width"\x3e\x3cform\x3e\n\t\t\t\t\x3cheader\x3e\x3ch2\x3eQuick Survey\x3c/h2\x3e\x3cbutton data-action\x3d"close" class\x3d"ss-delete" \x3e\x3c/button\x3e\x3c/header\x3e\n\t\t\t\t\x3cdiv class\x3d"content"\x3e\n\t\t\t\t\x3cdiv class\x3d"field rating"\x3e\n\t\t\t\t\t\x3cdiv class\x3d"label"\x3eHow likely are you to recommend Vocabulary.com to a friend or colleague?\x3c/div\x3e\n\t\t\t\t\t\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"rating" value\x3d"1"\x3e\x3cspan\x3e1\x3c/span\x3e\x3c/label\x3e\n\t\t\t\t\t\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"rating" value\x3d"2"\x3e\x3cspan\x3e2\x3c/span\x3e\x3c/label\x3e\n\t\t\t\t\t\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"rating" value\x3d"3"\x3e\x3cspan\x3e3\x3c/span\x3e\x3c/label\x3e\n\t\t\t\t\t\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"rating" value\x3d"4"\x3e\x3cspan\x3e4\x3c/span\x3e\x3c/label\x3e\n\t\t\t\t\t\x3clabel\x3e\x3cinput type\x3d"radio" name\x3d"rating" value\x3d"5"\x3e\x3cspan\x3e5\x3c/span\x3e\x3c/label\x3e\n\t\t\t\t\t\x3cdiv class\x3d"likely"\x3e\n\t\t\t\t\t\x3cspan \x3eNot Likely\x3c/span\x3e\n\t\t\t\t\t\x3cspan \x3eVery Likely\x3c/span\x3e\n\t\t\t\t\t\x3c/div\x3e \n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"field comments"\x3e\n\t\t\t\t\t\x3cdiv class\x3d"label"\x3eAny comments or suggestions?\x3c/div\x3e\n\t\t\t\t\t\x3ctextarea name\x3d"comments"\x3e\x3c/textarea\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3cdiv class\x3d"actions"\x3e\n\t\t\t\t\t\x3cbutton type\x3d"submit" disabled\x3eSubmit Survey\x3c/button\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\t\x3c/div\x3e\n\t\t\t\x3c/form\x3e\x3c/div\x3e\x3c/div\x3e').appendTo("body"),setTimeout(function(){return b.removeClass("hidden")},
1500),b.on("change","input[name\x3drating]",function(){return b.find("button[type\x3dsubmit]").prop("disabled",!1)}).on("click","button[data-action\x3dclose]",function(){b&&(f(),k||l.remote("/nps/"+a,{method:"DELETE"}).then(function(){g(1)}));return!1}).on("submit",function(){try{if(!k){k=!0;b.find("button[type\x3dsubmit]").prop("disabled",!0);var e={rating:b.find("input[name\x3drating]:checked").val(),plan:d},r=b.find("textarea[name\x3dcomments]").val().trim();r.length&&(e.comments=r);l.remote("/nps/"+
a,{method:"POST",data:e}).then(function(){b.find(".content").empty().append('\x3cp class\x3d"thanks"\x3eThank you for your feedback!\x3c/p\x3e');g(30);setTimeout(f,5E3)})}}catch(m){}return!1}))}function f(){b&&!b.hasClass("hidden")&&(b.addClass("hidden"),setTimeout(function(){b.remove();b=null},500))}function g(a){try{localStorage.setItem("npsdata",JSON.stringify({v:1,next:Date.now()+864E5*(a||1)}))}catch(d){}}var e=jQuery,l=modules.vcom.api,b,k=!1;this.show=function(){VCOM.auth(function(a){if("educator"==
a.ima){var b=JSON.parse(localStorage.getItem("npsdata")||"null");(!b||!b.next||b.next<Date.now()||1!=b.v)&&l.remote("/nps").then(function(b){b&&b.id?p(b.id,a.plan):g(1)})}})}});
Module.define("vcom/periodselector",["jquery","date","vcom/calendar","/css/periodselector.css"],function(){function p(k){function a(a){var d="string"===typeof a?u.find("li").filter(function(){return b(this).data("preset")===a}).first():a;if(d.length&&!d.hasClass("disabled")){var h=d.data("period");if(d.hasClass("disabled"))return null;if(h&&2==h.length)if(c&&w){var k=f(w,e(f(m,w),h[0]));var n=g(c,e(g(m,c),h[1]))}else"number"===typeof h[0]&&(h[0]=e(m,h[0])),"number"===typeof h[1]&&(h[1]=e(m,h[1])),
n=f(m,h[1]),k=g(n,f(m,h[0])),n=f(n,k);else c&&w&&(k=f(m,w||m),n=c);return{startDate:n,endDate:k}}return null}function d(){b("body").on("mousedown.periodMenu",function(a){0==b(a.target).closest(".dropdown-menu").length&&h()}).append(u);var a=r.offset();a.top+=r.height();a.left>.5*b(window).width()&&(a.left+=r.outerWidth()-u.outerWidth());u.hide();u.css({top:a.top,left:a.left}).fadeIn();u.focus();r.addClass("open")}function h(){u.fadeOut(function(){u.detach()});b("body").off("mousedown.periodMenu");
r.removeClass("open")}var r=b(k).empty().on("click",function(){u.is(":visible")?h():d()}).data("menu",this);k=r.data("mode")||"learner";var m=l((new Date).format("yyyy-mm-dd")),q=new Date(m.getFullYear(),6,1);q>m&&q.setFullYear(q.getFullYear()-1);var p=l(r.data("startDate")),n=f(m,l(r.data("endDate")));r.data("preset");var c=l(r.data("minDate")),w=l(r.data("maxDate"));b('\x3cspan class\x3d"date"\x3e\x3c/span\x3e').text(p.format("mmm d, yyyy")).appendTo(r);r.append(" to  ");b('\x3cspan class\x3d"date"\x3e\x3c/span\x3e').text(n.format("mmm d, yyyy")).appendTo(r);
var u=b('\x3cdiv class\x3d"dropdown-menu periods noselect" tabindex\x3d"-1"\x3e\x3cdiv class\x3d"cals"\x3e\x3cdiv class\x3d"calendar start"\x3e\x3c/div\x3e\x3cdiv class\x3d"calendar end"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"presets"\x3e\x3cul\x3e\x3c/ul\x3e\x3c/div\x3e\x3c/div\x3e'),z=u.find("ul");"school"==k?z.append(b("\x3cli\x3eLast School Year\x3c/li\x3e").data("period",[new Date(q.getFullYear(),5,30),new Date(q.getFullYear()-1,6,1)]).data("preset","last-school-year")).append(b("\x3cli\x3eThis School Year\x3c/li\x3e").data("period",
[m,q]).data("preset","this-school-year")):"class"==k?z.append(b("\x3cli\x3e"+(w&&w<m?"Class Start to End":"Class Start to Today")+"\x3c/li\x3e").data("preset","class-dates")):"learner"==k&&z.append(b("\x3cli\x3eAll Time\x3c/li\x3e").data("period",[m,c]).data("preset","all-time")).append(b("\x3cli\x3ePast Year\x3c/li\x3e").data("period",[m,new Date(m.getFullYear()-1,m.getMonth(),m.getDate())]).data("preset","past-year"));z.append(b("\x3cli\x3eLast 90 Days\x3c/li\x3e").data("period",[0,-90]).data("preset",
"last-90")).append(b("\x3cli\x3eLast 30 Days\x3c/li\x3e").data("period",[0,-30]).data("preset","last-30")).append(b("\x3cli\x3eLast 7 Days\x3c/li\x3e").data("period",[0,-7]).data("preset","last-7"));"school"!=k&&"class"!=k||z.append(b('\x3cli class\x3d"yesterday"\x3eYesterday\x3c/li\x3e').data("period",[-1,-1]).data("preset","yesterday")).append(b('\x3cli class\x3d"today"\x3eToday\x3c/li\x3e').data("period",[0,0]).data("preset","today"));z.find("li").attr("role","button").addClass("menu-item");var C=
b('\x3cform class\x3d"actions"\x3e\x3cbutton type\x3d"reset" class\x3d"cancel"\x3eCancel\x3c/button\x3e\x3cbutton type\x3d"submit" class\x3d"apply"\x3eApply\x3c/button\x3e\x3c/form\x3e').appendTo(u.find(".presets")).on("submit",function(){h()}).on("reset",function(){y.calendar("date",p);A.calendar("date",n);h()}).on("submit",function(a){a.preventDefault();r.trigger({type:"periodSelect",startDate:D.val(),endDate:E.val(),preset:z.find("li.selected").data("preset")||null});return!1}),D=b('\x3cinput type\x3d"hidden" name\x3d"startDate" /\x3e').appendTo(C).val(p.format("yyyy-mm-dd")),
E=b('\x3cinput type\x3d"hidden" name\x3d"endDate" /\x3e').appendTo(C).val(n.format("yyyy-mm-dd"));w&&w<m&&z.find(".today").addClass("disabled");w&&w<new Date(m.getFullYear(),m.getMonth(),m.getDate()-1)&&z.find(".yesterday").addClass("disabled");var y=u.find(".calendar.start").calendar(c&&w?{date:p,minDate:c,maxDate:f(w,new Date)}:{date:p,maxDate:new Date}).on("changeDate",function(a){A.calendar("date")<a.date&&A.calendar("date",a.date);D.val(a.date.format("yyyy-mm-dd"));z.find("li.selected").removeClass("selected")}),
A=u.find(".calendar.end").calendar(c&&w?{date:n,minDate:c,maxDate:f(w,new Date)}:{date:n,maxDate:new Date}).on("changeDate",function(a){y.calendar("date")>a.date&&y.calendar("date",a.date);E.val(a.date.format("yyyy-mm-dd"));z.find("li.selected").removeClass("selected")});u.find(".calendar").on("render",function(){var a=y.calendar("date"),c=A.calendar("date");u.find(".day").each(function(){var d=b(this),e=d.data("date");d.toggleClass("inrange",e>=a&&e<=c)})}).trigger("render");this.getPresetDates=
a;u.on("click",".menu-item",function(){var c=a(b(this));y.calendar("date",c.startDate);A.calendar("date",c.endDate);b(this).addClass("selected").siblings().removeClass("selected")}).on("keyup",function(a){"27"==a.keyCode?h():"13"==a.keyCode&&C.submit()})}function f(){for(var b=arguments[0],a=1;a<arguments.length;a++)b=arguments[a]<b?arguments[a]:b;return b}function g(){for(var b=arguments[0],a=1;a<arguments.length;a++)b=arguments[a]>b?arguments[a]:b;return b}function e(b,a){return new Date(b.getFullYear(),
b.getMonth(),b.getDate()+a)}function l(b){if(!b)return null;if("number"===typeof b)return new Date(Math.floor(b/1E4),Math.floor(b/100)%100-1,b%100);b=b.split("-");return new Date(parseInt(b[0]),parseInt(b[1])-1,parseInt(b[2]))}var b=jQuery;b.fn.periodMenu=function(){p(this);return this}});
Module.define("vcom/qpreview",["jquery"],function(){function p(e){function l(){var d={word:b};r.length&&(d.types=r);h.length&&(d.sortByTypes=h);g.post("/challenge/preview.json",d,function(d){function h(){g('\x3cform method\x3d"post" action\x3d"/challenge/preview/" \x3e\x3c/form\x3e').append(g('\x3cinput type\x3d"hidden" name\x3d"secret"\x3e').val(d.secret)).append(g('\x3cinput type\x3d"hidden" name\x3d"nonce"\x3e').val(n)).appendTo(e).submit()}var n="";if(d.code){e.empty();var c=g('\x3cdiv class\x3d"vcom-challenge"/\x3e').append(f(d.code));
c.find(".tools").remove();c.find(".choices a").one("click",function(){n=g(this).attr("nonce");c.find(".choices a").off("click");window.ga&&window.ga.create?ga("send","event","convert","question",{hitCallback:h}):h()});b==d.word?e.append('\x3ch4 class\x3d"hdr-qpreview"\x3eThink you know \x3cstrong\x3e'+d.word+"\x3c/strong\x3e? Test your word knowledge now:\x3c/h4\x3e"):e.append('\x3ch4 class\x3d"hdr-qpreview"\x3eThink youve got a good vocabulary? Take our quiz.\x3c/h4\x3e');a?e.append(c).slideDown():
e.append(c).show()}else e.remove()})}e=g(e).addClass("vcom_qpreview nocontent robots-nocontent").empty().hide();var b=e.data("word")||e.attr("word"),k="number"===typeof e.data("delay")?e.data("delay"):1E3,a=!!e.data("slide"),d=!!e.data("forall"),h=e.data("sort-by-types")?e.data("sort-by-types").split(","):[],r=e.data("types")?e.data("types").split(","):[];VCOM.authCache.get().then(function(a){a.validUser&&!d?e.remove():0<k?setTimeout(function(){Module.after("vcom/qpreview.css",l)},k):Module.after("vcom/qpreview.css",
l)})}function f(e){var g={},b,k=0,a,d=0,h,f="",m=String.fromCharCode,q=e.length;for(b=0;64>b;b++)g["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(b)]=b;for(a=0;a<q;a++)for(b=g[e.charAt(a)],k=(k<<6)+b,d+=6;8<=d;)((h=k>>>(d-=8)&255)||a<q-2)&&(f+=m(h));return decodeURIComponent(escape(f))}var g=jQuery;this.construct=function(){$this=g(this);return $this.data("QPreview")||new p(this)}});
Module.define("vcom/schoolfinder",["jquery","dotimeout"],function(p){p.SchoolFinder=function(g,e){function l(){var b=v.find("li.selected");if(b.length){var c=b.next("li");c.length?(b.removeClass("selected"),a(c.addClass("selected"))):m(function(){a(v.find("li.selected").removeClass("selected").next("li").addClass("selected"))})}else a(v.find("li").first().addClass("selected"))}function b(){c.trigger({type:"schoolselect",id:null,name:null})}function k(a){a||(a=v.find("li.selected"));a&&a.length&&c.trigger({type:"schoolselect",
id:a.attr("id"),name:a.find(".name").text(),city:a.find(".city").text(),state:a.data("state"),country:a.data("country")});v.slideUp()}function a(a){if(a&&a.length){var b=v.offset().top,c=b+v.outerHeight(),d=a.offset().top;a=d+a.outerHeight();d<b?v.scrollTop(v.scrollTop()+(d-b)):a>c&&v.scrollTop(v.scrollTop()+(a-c))}}function d(a){null!=z&&(window.clearTimeout(z),z=null);var b={search:t.val().trim(),state:C,country:D,grade:E};a?z=window.setTimeout(function(){h(b)},a):h(b)}function h(a){p(a,y)||(y=
q(a),r(),a.search&&0!=a.search.length?G=f.ajax({type:"POST",url:"/ui/findschool",data:a,success:function(a){v.html(a).scrollTop(0);A=!0;a=v.find("li");(lastCount=a.length)?a.first().addClass("selected"):v.html('\x3cdiv class\x3d"noresults"\x3eNo schools were found that match your search.  Try searching by postal code or city.\x3c/div\x3e');t.is(":focus")&&!v.is(":visible")&&v.slideDown(400,function(){v.css("overflow","auto")})}}):(v.empty(),v.is(":visible")&&v.slideUp(),A=!1,lastCount=0,v.scrollTop(0)))}
function r(){B=!1;null!=z&&window.clearTimeout(z);z=null;null!=G&&(G.abort(),G=null)}function m(a){if(A){r();var b=q(y);b.skip||(b.skip=0);b.skip+=10;y=b;B=!0;G=f.ajax({url:"/ui/findschool",type:"POST",data:b,success:function(b){B=!1;v.find("ul").append(f(b).find("li"));b=v.find("li").length;A=b>lastCount;lastCount=b;a&&a()}})}}function q(a){var b={},c;for(c in a)b[c]=a[c];return b}function p(a,b){if(a&&!b||b&&!a)return!1;for(var c in a)if(a[c]!=b[c])return!1;for(c in b)if(a[c]!=b[c])return!1;return!0}
var n={USA:!0,CAN:!0},c=jQuery('\x3cdiv class\x3d"schoolfinder"\x3e\x3c/div\x3e'),w=jQuery('\x3cinput type\x3d"hidden"\x3e').attr("name",e).appendTo(c),u=jQuery('\x3ca class\x3d"remove"\x3e\x3c/a\x3e').attr("title","Remove your school").appendTo(c).hide().on("click",function(a){b();t.focus()}),z=null,C=null,D=null,E=null,y,A,B=!1,G,t=jQuery('\x3cinput type\x3d"text" /\x3e').attr("autocorrect","off").attr("autocomplete","new-password").attr("spellcheck","false").attr("placeholder","Search for your school by name, city or zip code...").appendTo(c).on("blur",
function(){t.doTimeout("blur",1,function(){r();y=null;if(!F){var a=v.find("li:first-of-type");a.length&&a.find(".name").text().toLowerCase()==t.val().trim().toLowerCase()&&k(a)}F&&F.toLowerCase()!=t.val().trim().toLowerCase()&&b();w.val().length?u.show():b()});v.slideUp()}).on("input",function(a){d(250)}).on("keydown",function(b){if(40==b.keyCode)return b.preventDefault(),l(),!1;if(38==b.keyCode)return b.preventDefault(),b=v.find("li.selected"),b.length&&a(b.removeClass("selected").prev("li").addClass("selected")),
!1;if(13==b.keyCode)return b.preventDefault(),k(),!1}),v=jQuery('\x3cdiv class\x3d"resultsPane"\x3e\x3cdiv\x3e').appendTo(c).on("mousedown","li",function(a){jQuery(this).addClass("selected").siblings("selected").removeClass("selected");k(jQuery(this));return!1}).on("mouseenter","li",function(a){jQuery(this).addClass("selected").siblings("selected").removeClass("selected")}).on("mouseleave","li",function(a){jQuery(this).removeClass("selected")}).hide();this.clear=b;g=jQuery(g).empty().append(c);w.val(g.attr("schoolid"));
var F=g.attr("title");F&&F.length&&(t.val(F),u.show(),c.addClass("found"));g.attr("title","").attr("schoolid","");c.on("schoolselect",function(a){a.name?(F=a.name,t.val(a.name),c.addClass("found"),u.show(),w.val(a.id)):(c.removeClass("found"),t.val(""),u.hide(),w.val(""),F=null)});this.setState=function(a){null!=a&&(0<a.length&&(a=a.trim()),0==a.length&&(a=null));a!=C&&(C=a,d())};this.setCountry=function(a){null!=a&&(0<a.length&&(a=a.trim()),0==a.length&&(a=null));a!=D&&(D=a,C=null,n[D]?d():b())};
this.countrySupported=function(a){return!!n[D]};this.setGrade=function(a){a!=E&&(E=a,d())};this.show=function(){f(g).closest("form").addClass("schoolfinder-enabled")};v.hide();v.on("scroll",function(){A&&this.scrollTop+this.clientHeight+200>this.scrollHeight&&!B&&m()})};var f=window.jQuery;jQuery("head").append("\x3cstyle\x3e\n\t.schoolfinder .resultsPane {\n\t\toverflow: auto;\n\t\twidth: 100%;\n\t\theight: 149px;\n\t\tfont-size: 12px;\n\t   -webkit-overflow-scrolling: touch;\n\t   \tposition: absolute;\n\t\tz-index: 1000; background-color: white; border: 1px solid #ccc;\n\t\tbox-shadow: 1px 1px 5px rgba(0,0,0,0.3);\n\t}\n\t.schoolfinder .resultsPane ul {\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tlist-style: none;\n\t\tbackground-color: white;\n\t}\n\t.schoolfinder .resultsPane li {\n\t\tmargin: 0;\n\t\tborder-bottom: 1px solid #ccc;\n\t\tpadding: 5px 10px 5px 20px;\n\t\tcursor: pointer;\n\t}\n\t.schoolfinder .resultsPane li.selected {\n\t\tbackground-color: #eee;\n\t}\n\t.schoolfinder {\n\t\tposition: relative;\n\t}\n\t.schoolfinder input[type\x3dtext] {\n\t    padding-left: 24px;\n\t\tmargin: 0;\n\t\twidth: 100%;\n\t\tbackground-image: url('/images/icons/search.gif');\n\t\tbackground-repeat: no-repeat;\n\t\tbackground-position: 6px 50%;\n\t}\n\t.schoolfinder .resultsPane .noresults { text-align: center; padding: 35px 20px 0 20px; font-size: 16px; font-weight: 300; line-height: 175%; font-style: italic; color: #666; } \n\t.schoolfinder a.remove { display: block; cursor: pointer; position: absolute; left: 7px; margin-top: -7px; top: 50%; width: 14px; height: 14px; background-repeat: no-repeat; background-image: url('/images/icons/x-circle.png') } \n\t.schoolfinder .resultsPane .address { display: block; font-size: 11px; color: #999; } \n\x3c/style\x3e")});
Module.define("vcom/tools",["jquery","vcom/base","dotimeout"],function(p){function f(b,k,a){function d(a){e.contains(b[0],a.target)||a.target===b[0]||h()}function h(){b.off("hide",h);e("body").off("click",d);b.fadeOut(function(){b.trigger("hidden").remove()})}var g=k.offset();b.css("position","absolute").appendTo("body").on("hide",h);var f=b.outerHeight(),q=b.outerWidth(),l=k[0].getBoundingClientRect().top+f+30>e(window).height();a=e.extend({alignX:0,alignY:l?0:1,anchorX:0,anchorY:l?1:0,offsetX:0,
offsetY:l?-4:4},a);g.top+=k.height()*a.alignY+-f*a.anchorY+a.offsetY;g.left+=k.width()*a.alignX+-q*a.anchorX+a.offsetX;b.show().offset(g);k=b[0].getBoundingClientRect();k.right+20>e(window).width()&&(g.left-=k.right+20-e(window).width(),b.offset(g));b.hide();e("body").doTimeout("popupclick",1,"on","click",d)}function g(b){b&&b.length&&(b=b.trim());return b&&b.length?b:null}var e=jQuery,l=window.loginData||{};VCOM.auth(function(b){l=b});this.share=function(){function b(){a.addClass("showing");var b=
e('\x3cdiv class\x3d"vcom_popup share"\x3e\x3ca data-action\x3d"facebook" class\x3d"ss-facebook"\x3eFacebook\x3c/a\x3e\x3ca data-action\x3d"twitter" class\x3d"ss-twitter"\x3eTwitter\x3c/a\x3e\x3ca data-action\x3d"linkedin" class\x3d"ss-linkedin"\x3eLinkedIn\x3c/a\x3e\x3ca data-action\x3d"reddit" class\x3d"ss-reddit"\x3eReddit\x3c/a\x3e\x3ca data-action\x3d"tumblr"  class\x3d"ss-tumblr"\x3eTumblr\x3c/a\x3e\x3ca data-action\x3d"mail" class\x3d"ss-mail"\x3eEmail\x3c/a\x3e\x3c/div\x3e').on("hidden",function(){a.removeClass("showing")});
b.find("a").attr("href","javascript:void(0)").addClass("ss-social-circle").on("click",function(){var a=e(this).data("action");var b=k,d=b.closest(".wordPage");if(d.length){var f=e.extend({},d.data());f.lang=f.lang||"en";f.description=d.find(".blurb p.short").text().trim();0==f.description.length&&(b=e("\x3cdiv/\x3e").html(d.find("h3.definition").first().html()),b.find("a").remove(),f.description=b.text().trim());b=("en"==f.lang?"":f.lang+"/")+escape(f.word).replace(/ /g,"+");f.url="https://vocabulary.com/dictionary/"+
b;f.title=f.word+" - Definition from Vocabulary.com";f.shortUrl="https://vocab.com/d/"+b;f.tweet=escape(f.word+" - "+f.shortUrl);f.mailBody=f.word+" : "+f.shortUrl+"\n\n"+f.description+"\n\nFinally, a dictionary with a soul: https://vocab.com/d/"}else f={},f.url=g(e('link[rel\x3d"canonical"]').attr("href"))||g(f.url=e('meta[property\x3d"og:url"]').attr("content"))||document.location.href,f.shortUrl=g(e('link[rel\x3d"shorturl"]').attr("href"))||0==f.url.indexOf("https://www.vocabulary.com/")?"https://vocab.com/"+
f.url.substring(27):f.url,f.title=g(e('meta[property\x3d"og:title"]').attr("content"))||g(e("head \x3e title").text()),f.description=g(e('meta[property\x3d"og:description"]').attr("content"))||g(e('meta[name\x3d"description"]').attr("content")),f.tweet=g(e('meta[property\x3d"share:tweet"]').attr("content"))||f.title+" - "+f.shortUrl,f.mailBody=g(e('meta[property\x3d"share:mailbody"]').attr("content"))||"Here's a "+b.attr("itemtype")+" I saw on Vocabulary.com:\n\n"+f.title+"\n\n"+f.description+"\n\nRead more at: \n"+
f.url;switch(a){case "facebook":window.open("https://www.facebook.com/sharer/sharer.php?u\x3d"+escape(f.url)+"\x26name\x3d"+escape(f.title)+"\x26description\x3d"+escape(f.description),"share","menubar\x3dno,toolbar\x3dno,resizable\x3dyes,scrollbars\x3dyes,height\x3d360,width\x3d700").focus();break;case "twitter":window.open("https://twitter.com/home?status\x3d"+f.tweet,"share","menubar\x3dno,toolbar\x3dno,resizable\x3dyes,scrollbars\x3dyes,height\x3d360,width\x3d700").focus();break;case "reddit":window.open("http://www.reddit.com/submit?url\x3d"+
escape(f.url),"share","menubar\x3dno,toolbar\x3dno,resizable\x3dyes,scrollbars\x3dyes,height\x3d610,width\x3d860").focus();break;case "tumblr":window.open("http://www.tumblr.com/share/link?url\x3d"+escape(f.url)+"\x26name\x3d"+escape(f.title)+"\x26description\x3d"+escape(f.description),"share","menubar\x3dno,toolbar\x3dno,resizable\x3dyes,scrollbars\x3dyes,height\x3d450,width\x3d550").focus();break;case "linkedin":window.open("https://www.linkedin.com/shareArticle?mini\x3dtrue\x26url\x3d"+escape(f.url)+
"\x26title\x3d"+escape(f.title)+"\x26summary\x3d"+escape(f.description),"share","menubar\x3dno,toolbar\x3dno,resizable\x3dyes,scrollbars\x3dyes,height\x3d450,width\x3d550").focus();break;case "mail":window.open("mailto:?subject\x3d"+encodeURIComponent(f.title)+"\x26body\x3d"+encodeURIComponent(f.mailBody),"share","menubar\x3dno,toolbar\x3dno,resizable\x3dyes,scrollbars\x3dyes,height\x3d450,width\x3d600").focus()}window.ga&&ga("send","event","tools","share",a)});f(b,a);b.fadeIn()}var k=e(this).empty().addClass("vcom_share"),
a=e('\x3ca title\x3d"Share this" href\x3d"javascript:void(0)"\x3e\x3ci class\x3d"ss-link icon"\x3e\x3c/i\x3e \x3cspan\x3eShare It\x3c/span\x3e\x3c/a\x3e').addClass(k.data("buttonclass")||"button share").on("click",function(){a.hasClass("showing")||b()}).appendTo(k);k.attr("itemtype")&&a.attr("title","Share this "+k.attr("itemtype"));k.attr("label")&&a.find("span").text(k.attr("label"))};this.addToList=function(){var b=e(this).empty().addClass("vcom_addtolist").css("user-select","none"),g=b.attr("label")||
"Add to List...",a=b.data("buttonclass")||"button addtolist",d=e('\x3ca title\x3d"Add to Vocabulary List"\x3e\x3ci class\x3d"ss-list icon"\x3e\x3c/i\x3e\x3cspan\x3e'+g+"\x3c/span\x3e\x3c/a\x3e").addClass(a).on("click",function(){function a(){n.trigger("hide")}function g(b){b?e.post("/lists/save.json",{addwords:JSON.stringify([x]),id:b.wordlistid},function(){e('\x3cdiv class\x3d"confirm"\x3eAdded \x3cstrong\x3e\x3c/strong\x3e to list \x3ca\x3e\x3c/a\x3e\x3c/div\x3e').append(e("\x3cimg/\x3e").attr("src",
Module.getResource("/images/icons/close.gif")).on("click",a)).find("strong").text(x.word).end().find("a").attr("href","/lists/"+b.wordlistid).text(b.name).end().appendTo(n.empty())}):(a(),e('\x3cform method\x3d"post"\x3e\x3cinput type\x3d"hidden" name\x3d"addwords"/\x3e\x3c/form\x3e').find("input").val(JSON.stringify([x])).end().attr("action",null==b?"/lists/new":"/lists/"+b.wordlistid+"/edit").appendTo(document.body).submit())}var k=b.attr("word")||b.data("word"),p=b.attr("lang")||b.data("lang");
p||(p="en");var x={word:k,lang:p};if(l.validUser){if(window.ga&&ga("send","event","tools","addtolist","validuser"),!d.hasClass("showing")){d.addClass("showing");var n=e('\x3cdiv class\x3d"vcom_popup addlist"/\x3e').on("click",".option",function(){g(e(this).data("wl"))}).on("hidden",function(){d.removeClass("showing")}).hide();e('\x3ca class\x3d"option" role\x3d"button"\x3eNew List...\x3c/a\x3e').attr("title",'Add "'+x.word+'" to a new vocabulary list').appendTo(n);e.post("/lists/byprofile.json",{uid:l.uid,
orderby:"activitydate",pageSize:500},function(a){if(a.result){var b=0;a.result.wordlists.forEach(function(a){a.owner&&10>++b&&e('\x3ca role\x3d"button" class\x3d"option" /\x3e').text(a.name+" ("+a.wordcount+")").attr("title",'Add "'+x.word+'" to "'+a.name+'"').data("wl",a).appendTo(n)});f(n,d);n.appendTo(document.body).fadeIn()}})}}else window.ga&&ga("send","event","tools","addtolist","login"),confirm("You must be logged in to create lists. Would you like to log in now?")&&VCOM.login()}).appendTo(b)}});
Module.define("vcom/topnotes",["jquery"],function(p){function f(b){return 1<b.length?b.substring(0,b.indexOf("/",1)+1):""}var g=jQuery,e=g("body"),l=["/account/","/play/","/lists/","/jam/"],b=["/account/start"];VCOM.authCache.get().then(function(k){if("teacher-trial"==k.stage&&k.promo&&"teacher-trial"===k.promo.type&&!b.contains(location.pathname)&&l.contains(f(location.pathname))){var a=g('\x3cdiv class\x3d"top-notes"/\x3e'),d=g('\x3cspan class\x3d"note"/\x3e');0>k.promo.expdays?d.append("Your trial has expired."):
0==k.promo.expdays?d.append("Your Vocabulary.com trial expires today! Ready to join?"):d.append("Welcome to your Vocabulary.com trial! You have "+k.promo.expdays+" day"+(1!=k.promo.expdays?"s":"")+" remaining. Ready to join?");d.append(' \x3ca href\x3d"/membership/teachers/" class\x3d"nowrap"\x3ePurchase now!\x3c/a\x3e');d.appendTo(a);e.addClass("with-top-notes").prepend(a)}})});
Module.define("vcom/touchscroll",["jquery"],function(){var p=jQuery,f=null;p.fn.touchScroll=function(){var g=this,e=!1,l,b,k=0,a=parseFloat(g.data("speed"))||1;g.on("mouseenter",function(){g.focus();f=g});g.on("click","a",function(){if(10<k)return!1});g.on("mousedown",function(a){e=!0;g.addClass("panning");l=a.pageX-this.offsetLeft;b=this.scrollLeft;k=0});g.on("mouseleave",function(a){e=!1;g.removeClass("panning");f==g&&(f=g)});g.on("mouseup",function(a){e=!1;g.removeClass("panning")});g.on("mousemove",
function(d){e&&this.scrollLeft<this.scrollWidth-this.clientWidth&&(d.preventDefault(),d=(d.pageX-this.offsetLeft-l)*a,k+=Math.abs(d),this.scrollLeft=b-d)})};p(function(){p(".touch-scroll").touchScroll()})});Module.define("vcom/trimtext",["jquery"],function(p){p.trimtext=function(f){f=document.getElementsByClassName(f);Array.from(f).forEach(function(f){for(;f.scrollHeight>f.offsetHeight;){var e=f.textContent.split(" ");e.pop();e[e.length-1]+="...";f.innerText=e.join(" ")}})}});
Module.define("vcom/wlviewmgr",["params","jquery"],function(){jQuery(function(p){function f(a){var d=""+l;a===k?delete l.view:l.view=a;b.attr("data-view",a);p("#view_"+a).addClass("selected").siblings("a").removeClass("selected");"notes"==a?p("#wordlist").addClass("notesView").removeClass("listView").trigger("resize"):p("#wordlist").addClass("listView").removeClass("notesView").trigger("resize");""+l!=d&&(a=l.toString(),a.length?history.replaceState({},document.title,location.pathname+location.search+
"#"+a):history.replaceState({},document.title,location.pathname+location.search))}function g(a){return function(b,d){return-a(b,d)}}function e(){l=new modules.params.Params(document.location.hash?document.location.hash.substring(1):"");f("list"===(l.view||k)?"list":"notes")}var l=null;p(".page_wordlist");var b=p(".page_wordlist .viewSelector"),k=b.data("defaultview")||"notes";p("#wlOrder").on("change",function(){if(a[this.value]){var b=a[this.value];p("#wordlist li.entry").sort(b).appendTo(p("#wordlist").scrollTop(0));
a.current=b}});b.find("a").on("click",function(){p(this).hasClass("toggle-container")?f("list"===(l.view||k)?"notes":"list"):f(p(this).data("view"))});var a={alpha:function(a,b){a=a.getAttribute("word");b=b.getAttribute("word");var d=a.toLowerCase().replace(/[-\/'\s]+/,""),f=b.toLowerCase().replace(/[-\/'\s]+/,"");return d==f?a==b?0:a<b?-1:1:d<f?-1:1}};a.ralpha=g(a.alpha);a.freq=function(a,b){a=parseFloat(a.getAttribute("freq"));b=parseFloat(b.getAttribute("freq"));return isNaN(a)?isNaN(b)?0:1:isNaN(b)?
-1:a==b?0:a<b?-1:1};a.rfreq=g(a.freq);a.natural=function(a,b){a=parseInt(a.id.substring(5));b=parseInt(b.id.substring(5));return a==b?0:a<b?-1:1};a.progress=function(a,b){a=parseFloat(a.getAttribute("prog"));b=parseFloat(b.getAttribute("prog"));return isNaN(a)?isNaN(b)?0:1:isNaN(b)?-1:a==b?0:a<b?1:-1};a.current=a.natural;p(window).on("hashchange",e);e()})});
Module.define("vcom/wordfamily",["jquery"],function(){function p(e){function l(){var a=e.attr("word"),c=h;if(c&&c.length){for(var d=0;d<c.length;d++)c[d].selected=c[d].word==a,c[d].inPath=!1;p.empty();var g={};a=null;for(d=0;d<c.length;d++)g[c[d].word]=c[d],c[d].children=[],c[d].selected&&(a=c[d]);for(d=0;d<c.length;d++){var k=c[d].parent;k&&(k=g[k],c[d].parentWord=k,k.children.push(c[d]))}c=0;for(g=a;null!=g;g=g.parentWord)c++,g.inPath=!0;g=a;for(d=c;null!=g;g=g.parentWord,d--)g.depth=d;b(a,c);f(".bar span").each(function(){var a=
f(this),b=a.outerWidth();b+4>a.parent().innerWidth()?a.hide():a.show().css("margin-left",-b/2+"px")})}}function b(d,c){for(var e=f("\x3cli/\x3e").data(d).appendTo(p),g=k(d,m,m),h=f('\x3cdiv class\x3d"row"\x3e\x3c/div\x3e').appendTo(e),n=a(d,d.word,d.freq,h,g,c),l=0;l<d.children.length;l++)1==d.children[l].type&&(n=a(d.children[l],d.children[l].word,d.children[l].ffreq,h,g,c)||n);for(l=0;l<d.children.length;l++)1<d.children[l].type&&(n=a(d.children[l],d.children[l].word,d.children[l].ffreq,h,g,c)||
n);g=n;d.parentWord?(d=b(d.parentWord,c-1),c=f("\x3ccanvas/\x3e").attr("width",m).attr("height",20).appendTo(e)[0],c.getContext&&(e=c.getContext("2d"),e.fillStyle="rgba(227,235,241)",e.beginPath(),e.moveTo(0,0),e.lineTo(c.width,0),e.bezierCurveTo(c.width,c.height,d.offsetLeft+d.clientWidth,0,d.offsetLeft+d.clientWidth,c.height),e.lineTo(d.offsetLeft,c.height),e.bezierCurveTo(d.offsetLeft,0,0,c.height,0,0),e.closePath(),e.fill())):(c=f("\x3ccanvas/\x3e").attr("width",m).attr("height",20).appendTo(e)[0],
c.getContext&&(e=c.getContext("2d"),e.fillStyle="rgba(227,235,241)",e.fillRect(0,0,c.width,c.height)),f('\x3cli\x3e\x3cdiv class\x3d"row"\x3e\x3c/div\x3e\x3c/li\x3e').appendTo(p).find(".row").append(f('\x3ca class\x3d"bar"/\x3e').css("width","100%").attr("href","/dictionary/"+escape(d.word)).data(d).append(f("\x3cspan/\x3e").text('the "'+d.word+'" family'))));return g}function k(a,b,d){for(var c=b/a.ffreq,e=Math.round(a.freq*c),f=0;f<a.children.length;f++)e+=Math.max(2,Math.round(c*a.children[f].ffreq));
return e>d?k(a,b-(e-b)):c}function a(a,b,d,e,g,h){g=Math.max(2,Math.round(g*d));0==d&&a.depth==h&&(g=m);b=f("\x3ca/\x3e").addClass("bar type"+a.type).data(a).attr("href","/dictionary/"+escape(a.word)).width(g).append(f("\x3cspan/\x3e").text(b)).appendTo(e);a.hw&&b.addClass("hw");return a.selected||a.inPath&&a.depth==h+1?(b.addClass("selected"),a.selected&&a.depth==h&&b.addClass("current"),b[0]):b}function d(a,b,d){if(d){var c=(1+parseInt(""+1/(d/4E3))).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",");
a=d==b.freq?"You'll encounter the word \x3cstrong\x3e"+a+"\x3c/strong\x3e about once every "+c+" pages .":"You'll encounter some form of the word \x3cstrong\x3e"+a+"\x3c/strong\x3e about once every "+c+" pages."}else a="\x3cstrong\x3e"+a+"\x3cstrong\x3e is extremely rare.";x.find("p").html(a);a=this.offsetLeft+this.clientWidth/2;b=this.offsetParent.clientWidth-x.width()+10;b=Math.min(Math.max(-10,a-x.width()/2),b);d=x.find(".nub");d.css("left",a-b-d.width()/2+"px");x.css({left:b+"px",bottom:this.offsetParent.clientHeight-
this.offsetTop+15+"px"}).show()}e=f(e).addClass("vcom_wordfamily resizable").empty().on("resized",function(){p.hide();var a=e.innerWidth();m!=a?(m=a,p.show(),l()):p.show()});var h=eval("("+e.attr("data")+")"),p=f("\x3cul/\x3e").appendTo(e),m=e.innerWidth()-2,q=null,x=f('\x3cdiv class\x3d"tooltip"\x3e\x3cp\x3e\x3c/p\x3e\x3cspan class\x3d"nub"\x3e\x3c/span\x3e\x3c/div\x3e').hide().appendTo(e);e.removeAttr("data").on("mouseenter",".bar",function(){q=f(this).data();d.call(this,q.word,q,q.ffreq)}).on("mouseleave",
".bar",function(){x.hide()}).on("click",".bar",function(a){g.hasClass("touch-screen")&&(q=f(this).data(),f(this).hasClass("hovering")||(f(".hovering").removeClass("hovering"),f(this).addClass("hovering"),d.call(this,q.word,q,q.ffreq),a.preventDefault(),a.stopPropagation()))}).on("click",".tooltip",function(){document.location.href="/dictionary/"+escape(q.word)});l()}var f=jQuery,g=f("body");this.construct=function(){$this=f(this);var e=$this.data("wordfamily");e||(e=$this.data("wordfamily",e=new p(this)));
return e};f(window).on("touchstart",function(e){g.addClass("touch-screen")});this.WordFamilyDisplay=p});